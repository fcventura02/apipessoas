{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\filip\\\\OneDrive\\\\Documentos\\\\EstudoNode\\\\apipessoas\\\\apiReact\\\\src\\\\pages\\\\main\\\\search.js\";\nimport React, { Component } from 'react';\nimport api from '../../services/api';\nexport class Search extends Component {\n  constructor(props) {\n    super(props);\n\n    this.inputPesquisa = async e => {\n      e.preventDefault();\n      const form = e.target.parentNode;\n      const formData = new FormData(form);\n\n      function tiradata(d) {\n        return d.data.docs.filter(object => {\n          return parseInt(formData.get('q')) === object.person_cpf;\n        });\n      }\n\n      let page = 1;\n      let result = [];\n      console.log(this.props);\n\n      for (page; page <= this.props.personInfo.pages; page++) {\n        result = result.concat((await api.get(\"/list?page=\".concat(page)).then(response => {\n          return tiradata(response);\n        })));\n      }\n\n      if (result.length !== 0) {\n        this.alerta(result); // window.location.href= `/show/${result[0]._id}`           \n      } else {\n        this.alerta(false);\n      }\n    };\n\n    this.alerta = result => {\n      if (result) {\n        document.getElementById(\"alerta\").style.display = 'block';\n        document.getElementById(\"confirmado\").style.display = 'block';\n        document.getElementById(\"alert-nome\").innerHTML = \"Pessoa: \".concat(result[0].person_name);\n        document.getElementById(\"alert-cpf\").innerHTML = \"Cpf: \".concat(result[0].person_cpf);\n\n        document.getElementById(\"editar\").onclick = function (e) {\n          e.preventDefault();\n          window.location.href = \"/edit/\".concat(result[0]._id);\n        };\n\n        document.getElementById(\"delete\").onclick = function (e) {\n          e.preventDefault();\n          api.delete(\"http://localhost:3001/api/del/\".concat(result[0]._id)).then(alert(\"Deletado\")).catch(err => console.log(err));\n        };\n      } else {\n        document.getElementById(\"alerta\").style.display = 'block';\n        document.getElementById(\"negado\").style.display = 'block';\n        document.getElementById(\"delete\").style.display = 'none';\n        document.getElementById(\"editar\").style.display = 'none';\n        document.getElementById(\"alert-nome\").innerHTML = \"Cpf n\\xE3o encontrado\";\n        document.getElementById(\"alert-cpf\").innerHTML = \"\";\n      }\n    };\n\n    this.close = () => {\n      document.getElementById(\"alerta\").style.display = 'none';\n      document.getElementById(\"confirmado\").style.display = 'none';\n      document.getElementById(\"negado\").style.display = 'none';\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"alerta\",\n      className: \"alerta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      id: \"negado\",\n      className: \"ion-ios-close-outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      id: \"confirmado\",\n      className: \"ion-checkmark-round\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"alert-nome\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"alert-cpf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      id: \"editar\",\n      className: \"editar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Editar\"), React.createElement(\"button\", {\n      id: \"delete\",\n      className: \"excluir\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, \"Excluir\"), React.createElement(\"button\", {\n      onClick: this.close,\n      id: \"fechar\",\n      className: \"fechar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, \"Fechar\")), React.createElement(\"form\", {\n      id: \"search-people\",\n      className: \"header_search_input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"q\",\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Pesquisar Cpf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.inputPesquisa,\n      className: \"ion-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    })));\n  }\n\n}\nexport default Search;","map":{"version":3,"sources":["C:\\Users\\filip\\OneDrive\\Documentos\\EstudoNode\\apipessoas\\apiReact\\src\\pages\\main\\search.js"],"names":["React","Component","api","Search","constructor","props","inputPesquisa","e","preventDefault","form","target","parentNode","formData","FormData","tiradata","d","data","docs","filter","object","parseInt","get","person_cpf","page","result","console","log","personInfo","pages","concat","then","response","length","alerta","document","getElementById","style","display","innerHTML","person_name","onclick","window","location","href","_id","delete","alert","catch","err","close","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport api from '../../services/api';\r\n\r\nexport class Search extends Component {\r\n    constructor (props){\r\n        super (props)\r\n    }\r\n    inputPesquisa = async (e) => {\r\n        e.preventDefault();\r\n        const form = e.target.parentNode\r\n        const formData = new FormData(form);\r\n        function tiradata(d) {\r\n            return d.data.docs.filter((object) => {\r\n                return parseInt(formData.get('q')) === object.person_cpf\r\n            });\r\n        }\r\n        let page = 1;\r\n        let result = [];\r\n        console.log(this.props)\r\n        for (page; page <= this.props.personInfo.pages; page++) {\r\n            result = result.concat(await api.get(`/list?page=${page}`).then((response) => {\r\n                return tiradata(response)\r\n            }))\r\n        }\r\n        if (result.length !== 0) {\r\n\r\n            this.alerta(result);\r\n            // window.location.href= `/show/${result[0]._id}`           \r\n        } else {\r\n            this.alerta(false)\r\n        }\r\n        \r\n    }\r\n\r\n    alerta = (result) => {\r\n        if (result) {\r\n            document.getElementById(\"alerta\").style.display = 'block';\r\n            document.getElementById(\"confirmado\").style.display = 'block';\r\n            document.getElementById(\"alert-nome\").innerHTML = `Pessoa: ${result[0].person_name}`;\r\n            document.getElementById(\"alert-cpf\").innerHTML = `Cpf: ${result[0].person_cpf}`;\r\n            document.getElementById(\"editar\").onclick = function (e) {\r\n                e.preventDefault();\r\n                window.location.href = `/edit/${result[0]._id}`\r\n            };\r\n            document.getElementById(\"delete\").onclick = function (e) {\r\n                e.preventDefault();\r\n                api.delete(`http://localhost:3001/api/del/${result[0]._id}`)\r\n                    .then(alert(\"Deletado\"))\r\n                    .catch(err => console.log(err));\r\n            }\r\n        } else {\r\n            document.getElementById(\"alerta\").style.display = 'block';\r\n            document.getElementById(\"negado\").style.display = 'block';\r\n            document.getElementById(\"delete\").style.display = 'none';\r\n            document.getElementById(\"editar\").style.display = 'none';\r\n            document.getElementById(\"alert-nome\").innerHTML = `Cpf nÃ£o encontrado`;\r\n            document.getElementById(\"alert-cpf\").innerHTML = ``;\r\n\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        document.getElementById(\"alerta\").style.display = 'none';\r\n        document.getElementById(\"confirmado\").style.display = 'none';\r\n        document.getElementById(\"negado\").style.display = 'none';\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div id='alerta' className='alerta'>\r\n                    <span id='negado' className='ion-ios-close-outline'></span>\r\n                    <span id='confirmado' className='ion-checkmark-round'></span>\r\n                    <p id='alert-nome'></p>\r\n                    <p id='alert-cpf'></p>\r\n                    <button id='editar' className='editar' >Editar</button>\r\n                    <button id='delete' className='excluir' >Excluir</button>\r\n                    <button onClick={this.close} id='fechar' className='fechar' >Fechar</button>\r\n\r\n                </div>\r\n                <form id=\"search-people\" className=\"header_search_input\">\r\n                    <input name=\"q\" type=\"number\" className=\"form-control\" placeholder=\"Pesquisar Cpf\" />\r\n                    <button onClick={this.inputPesquisa} className=\"ion-search\" ></button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Search\r\n"]},"metadata":{},"sourceType":"module"}