{"ast":null,"code":"import _objectWithoutProperties from \"C:\\\\Users\\\\filip\\\\OneDrive\\\\Documentos\\\\EstudoNode\\\\apipessoas\\\\apiReact\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"C:\\\\Users\\\\filip\\\\OneDrive\\\\Documentos\\\\EstudoNode\\\\apipessoas\\\\apiReact\\\\src\\\\pages\\\\main\\\\index.js\";\nimport React, { Component } from 'react';\nimport api from '../../services/api';\nimport TableRow from './tableRow';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './style.css';\nexport default class Main extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      person: [],\n      personInfo: {},\n      page: 1\n    };\n\n    this.loadPerson = async (page = 1) => {\n      await api.get(\"/list?page=\".concat(page)).then(response => {\n        const _response$data = response.data,\n              docs = _response$data.docs,\n              personInfo = _objectWithoutProperties(_response$data, [\"docs\"]);\n\n        this.setState({\n          person: docs,\n          personInfo,\n          page\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.prevPage = () => {\n      const page = this.state.page;\n      if (page === 1) return;\n      const pageNumber = page - 1;\n      this.loadPerson(pageNumber);\n    };\n\n    this.nextPage = () => {\n      const _this$state = this.state,\n            page = _this$state.page,\n            personInfo = _this$state.personInfo;\n      if (page === personInfo.pages) return;\n      const pageNumber = page + 1;\n      this.loadPerson(pageNumber);\n    };\n\n    this.inputPesquisa = async e => {\n      e.preventDefault();\n      const form = e.target.parentNode;\n      const formData = new FormData(form);\n\n      function tiradata(d) {\n        return d.data.docs.filter(object => {\n          return parseInt(formData.get('q')) === object.person_cpf;\n        });\n      }\n\n      let page = 1;\n      let result = [];\n\n      for (page; page <= this.state.personInfo.pages; page++) {\n        result = result.concat((await api.get(\"/list?page=\".concat(page)).then(response => {\n          return tiradata(response);\n        })));\n      }\n\n      if (result.length !== 0) {\n        this.alerta(result); // window.location.href= `/show/${result[0]._id}`           \n      } else {\n        this.alerta(false);\n      }\n    };\n\n    this.alerta = result => {\n      if (result) {\n        document.getElementById(\"alerta\").style.display = 'block';\n        document.getElementById(\"confirmado\").style.display = 'block';\n        document.getElementById(\"alert-nome\").innerHTML = \"Pessoa: \".concat(result[0].person_name);\n        document.getElementById(\"alert-cpf\").innerHTML = \"Cpf: \".concat(result[0].person_cpf);\n\n        document.getElementById(\"editar\").onclick = function (e) {\n          e.preventDefault();\n          window.location.href = \"/edit/\".concat(result[0]._id);\n        };\n\n        document.getElementById(\"delete\").onclick = function (e) {\n          e.preventDefault();\n          api.delete(\"http://localhost:3001/api/del/\".concat(result[0]._id)).then(alert(\"Deletado\")).catch(err => console.log(err));\n        };\n      } else {\n        document.getElementById(\"alerta\").style.display = 'block';\n        document.getElementById(\"negado\").style.display = 'block';\n        document.getElementById(\"delete\").style.display = 'none';\n        document.getElementById(\"editar\").style.display = 'none';\n        document.getElementById(\"alert-nome\").innerHTML = \"Cpf n\\xE3o encontrado\";\n        document.getElementById(\"alert-cpf\").innerHTML = \"Cpf\";\n      }\n    };\n\n    this.close = () => {\n      document.getElementById(\"alerta\").style.display = 'none';\n      document.getElementById(\"confirmado\").style.display = 'none';\n      document.getElementById(\"negado\").style.display = 'none';\n    };\n\n    this.BdVazio = () => {\n      if (this.state.personInfo.total === 0) {\n        return React.createElement(\"h5\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, \"Seu banco de dados est\\xE1 vazio, por favor v\\xE1 em create e alimente seu Banco de dados. Ele esta com fome!\");\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.loadPerson();\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          page = _this$state2.page,\n          personInfo = _this$state2.personInfo;\n    return React.createElement(\"div\", {\n      className: \"person-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"alerta\",\n      className: \"alerta\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      id: \"negado\",\n      className: \"ion-ios-close-outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      id: \"confirmado\",\n      className: \"ion-checkmark-round\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"alert-nome\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      id: \"alert-cpf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      id: \"editar\",\n      className: \"editar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Editar\"), React.createElement(\"button\", {\n      id: \"delete\",\n      className: \"excluir\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Excluir\"), React.createElement(\"button\", {\n      onClick: this.close,\n      id: \"fechar\",\n      className: \"fechar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Fechar\")), React.createElement(\"h3\", {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"Lista de Pessoas\"), React.createElement(\"form\", {\n      id: \"search-people\",\n      className: \"header_search_input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      name: \"q\",\n      type: \"number\",\n      className: \"form-control\",\n      placeholder: \"Pesquisar Cpf\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.inputPesquisa,\n      className: \"ion-search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"bd-vazio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.BdVazio()), React.createElement(\"table\", {\n      className: \"table table-striped\",\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Pessoa\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Cpf\"), React.createElement(\"th\", {\n      colSpan: \"2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \"A\\xE7\\xE3o\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, this.state.person.map((object, i) => {\n      return React.createElement(TableRow, {\n        obj: object,\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      });\n    })))), React.createElement(\"div\", {\n      className: \"actions\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      disabled: page === 1,\n      onClick: this.prevPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Anterior\"), React.createElement(\"button\", {\n      disabled: page === personInfo.pages,\n      onClick: this.nextPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Pr\\xF3ximo\")));\n  }\n\n}\n;","map":{"version":3,"sources":["C:\\Users\\filip\\OneDrive\\Documentos\\EstudoNode\\apipessoas\\apiReact\\src\\pages\\main\\index.js"],"names":["React","Component","api","TableRow","Main","state","person","personInfo","page","loadPerson","get","then","response","data","docs","setState","catch","error","console","log","prevPage","pageNumber","nextPage","pages","inputPesquisa","e","preventDefault","form","target","parentNode","formData","FormData","tiradata","d","filter","object","parseInt","person_cpf","result","concat","length","alerta","document","getElementById","style","display","innerHTML","person_name","onclick","window","location","href","_id","delete","alert","err","close","BdVazio","total","componentDidMount","render","marginTop","map","i"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport api from '../../services/api';\r\nimport TableRow from './tableRow';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './style.css'\r\nexport default class Main extends Component {\r\n    state = {\r\n        person: [],\r\n        personInfo: {},\r\n        page: 1,\r\n    };\r\n    componentDidMount() {\r\n        this.loadPerson();\r\n    };\r\n\r\n    loadPerson = async (page = 1) => {\r\n        await api.get(`/list?page=${page}`)\r\n            .then((response) => {\r\n                const { docs, ...personInfo } = response.data\r\n                this.setState({\r\n                    person: docs,\r\n                    personInfo,\r\n                    page\r\n                })\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            });\r\n    };\r\n\r\n    prevPage = () => {\r\n        const { page } = this.state;\r\n        if (page === 1) return;\r\n        const pageNumber = page - 1;\r\n        this.loadPerson(pageNumber);\r\n    }\r\n    nextPage = () => {\r\n        const { page, personInfo } = this.state;\r\n        if (page === personInfo.pages) return;\r\n        const pageNumber = page + 1;\r\n        this.loadPerson(pageNumber);\r\n    }\r\n\r\n    inputPesquisa = async (e) => {\r\n        e.preventDefault();\r\n        const form = e.target.parentNode\r\n        const formData = new FormData(form);\r\n        function tiradata(d) {\r\n            return d.data.docs.filter((object) => {\r\n                return parseInt(formData.get('q')) === object.person_cpf\r\n            });\r\n        }\r\n        let page = 1;\r\n        let result = [];\r\n\r\n        for (page; page <= this.state.personInfo.pages; page++) {\r\n            result = result.concat(await api.get(`/list?page=${page}`).then((response) => {\r\n                return tiradata(response)\r\n            }))\r\n        }\r\n        if (result.length !== 0) {\r\n\r\n            this.alerta(result);\r\n            // window.location.href= `/show/${result[0]._id}`           \r\n        } else {\r\n            this.alerta(false)\r\n        }\r\n    }\r\n\r\n    alerta = (result) => {\r\n        if (result) {\r\n            document.getElementById(\"alerta\").style.display = 'block';\r\n            document.getElementById(\"confirmado\").style.display = 'block';\r\n            document.getElementById(\"alert-nome\").innerHTML = `Pessoa: ${result[0].person_name}`;\r\n            document.getElementById(\"alert-cpf\").innerHTML = `Cpf: ${result[0].person_cpf}`;\r\n            document.getElementById(\"editar\").onclick = function (e) {\r\n                e.preventDefault();\r\n                window.location.href = `/edit/${result[0]._id}`\r\n            };\r\n            document.getElementById(\"delete\").onclick = function (e) {\r\n                e.preventDefault();\r\n                api.delete(`http://localhost:3001/api/del/${result[0]._id}`)\r\n                    .then(alert(\"Deletado\"))\r\n                    .catch(err => console.log(err));\r\n            }\r\n        } else {\r\n            document.getElementById(\"alerta\").style.display = 'block';\r\n            document.getElementById(\"negado\").style.display = 'block';\r\n            document.getElementById(\"delete\").style.display = 'none';\r\n            document.getElementById(\"editar\").style.display = 'none';\r\n            document.getElementById(\"alert-nome\").innerHTML = `Cpf não encontrado`;\r\n            document.getElementById(\"alert-cpf\").innerHTML = `Cpf`;\r\n\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        document.getElementById(\"alerta\").style.display = 'none';\r\n        document.getElementById(\"confirmado\").style.display = 'none';\r\n        document.getElementById(\"negado\").style.display = 'none';\r\n    }\r\n\r\n\r\n    BdVazio = () => {\r\n        if (this.state.personInfo.total === 0) {\r\n            return (<h5>\r\n                Seu banco de dados está vazio, por favor vá em create e alimente seu\r\n                Banco de dados. Ele esta com fome!\r\n                </h5>)\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        const { page, personInfo } = this.state;\r\n        return (\r\n            <div className=\"person-list\">\r\n\r\n                <div id='alerta' className='alerta'>\r\n                    <span id='negado' className='ion-ios-close-outline'></span>\r\n                    <span id='confirmado' className='ion-checkmark-round'></span>\r\n                    <p id='alert-nome'></p>\r\n                    <p id='alert-cpf'></p>\r\n                    <button id='editar' className='editar' >Editar</button>\r\n                    <button id='delete' className='excluir' >Excluir</button>\r\n                    <button onClick={this.close} id='fechar' className='fechar' >Fechar</button>\r\n\r\n                </div>\r\n\r\n                <h3 align=\"center\">Lista de Pessoas</h3>\r\n                <form id=\"search-people\" className=\"header_search_input\">\r\n                    <input name=\"q\" type=\"number\" className=\"form-control\" placeholder=\"Pesquisar Cpf\" />\r\n                    <button onClick={this.inputPesquisa} className=\"ion-search\" ></button>\r\n                </form>\r\n\r\n                <div className=\"bd-vazio\">\r\n                    {this.BdVazio()}\r\n                </div>\r\n\r\n                <table className=\"table table-striped\" style={{ marginTop: 20 }}>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Pessoa</th>\r\n                            <th>Cpf</th>\r\n                            <th colSpan=\"2\">Ação</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <React.Fragment>\r\n                            {\r\n                                this.state.person.map((object, i) => {\r\n                                    return <TableRow obj={object} key={i} />;\r\n                                })\r\n                            }\r\n                        </React.Fragment>\r\n\r\n                    </tbody>\r\n                </table>\r\n\r\n                <div className=\"actions\">\r\n                    <button disabled={page === 1} onClick={this.prevPage}>Anterior</button>\r\n                    <button disabled={page === personInfo.pages} onClick={this.nextPage}>Próximo</button>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    };\r\n};"]},"metadata":{},"sourceType":"module"}